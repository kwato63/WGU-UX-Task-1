<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome to Taniti</title>
    <link rel="stylesheet" href="css/styles.css" />
    <script src="javascript/custom-elements.js" defer></script>
  </head>
  <body>
    <site-header></site-header>

    <main id="mainContent">
    </main>

    <site-footer></site-footer>

    <script>
      // Function to get and decode URL parameters
      function getParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return decodeURIComponent(urlParams.get(param) || "");
      }

      const src = getParam("src");    // e.g. "main-details"
      const title = getParam("title"); // e.g. "Discover Taniti"

      // Only run if both parameters are present
      if (src && title) {
        const main = document.getElementById("mainContent");

        const hero = document.createElement("hero-banner");
        hero.setAttribute("data-src", `data/${src}.json`);
        hero.setAttribute("data-title", title);

        const about = document.createElement("about-section");
        about.setAttribute("data-src", `data/${src}.json`);
        about.setAttribute("data-title", title);

        main.appendChild(hero);
        main.appendChild(about);
      } else {
        // Handle missing params
        document.getElementById("mainContent").innerHTML =
          "<p>Error: Missing 'src' or 'title' parameters in the URL.</p>";
      }
    </script>
  </body>
</html>
