<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome to Taniti</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body
    data-hero-image="images/Beach.jpeg"
    data-hero-title="Welcome to Taniti"
    data-hero-text="Your tropical island escape awaits. Explore white-sand beaches, lush rainforests, and unforgettable island adventures."
  >
    <div id="header-container"></div>
    <main>
      <div id="hero-container"></div>
      <section class="about">
        <h2>Discover Taniti</h2>
        <p>
          Taniti is a small, tropical island in the Pacific with a diverse
          landscape of beaches, mountains, and rainforests. Learn about our
          history, culture, and must-see locations.
        </p>
        <p>
          Lorem ipsum, dolor sit amet consectetur adipisicing elit. Incidunt
          necessitatibus deserunt, expedita asperiores harum dolorum est officia
          quam non impedit quasi deleniti modi quia soluta dolores eos, dolore
          beatae dolorem.
        </p>
        <p>
          Lorem ipsum, dolor sit amet consectetur adipisicing elit. Incidunt
          necessitatibus deserunt, expedita asperiores harum dolorum est officia
          quam non impedit quasi deleniti modi quia soluta dolores eos, dolore
          beatae dolorem.
        </p>
        <a href="about.html" class="button">Learn More</a>
      </section>
      <section id="event-teasers" class="teasers" data-src="data/events.json">
        <h2>Island Events</h2>
        <!-- Teasers will be injected here -->
      </section>

      <section id="event-teasers" class="teasers">
        <h2>Island Events</h2>

        <div class="teaser-left">
          <img class="teaser-image" src="images/Beach.jpeg" />
          <div>
            <h3>Event Name</h3>
            <p>
              Lorem ipsum, dolor sit amet consectetur adipisicing elit. Incidunt
              necessitatibus deserunt, expedita asperiores harum dolorum est
              officia quam non impedit quasi deleniti modi quia soluta dolores
              eos, dolore beatae dolorem.
            </p>
            <a href="#">Read More</a>
          </div>
        </div>
        <div class="teaser-right">
          <h3>Event Name</h3>
          <p>
            <img class="teaser-image" src="images/Beach.jpeg" />
            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Incidunt
            necessitatibus deserunt, expedita asperiores harum dolorum est
            officia quam non impedit quasi deleniti modi quia soluta dolores
            eos, dolore beatae dolorem.
          </p>
          <a href="#">Read More</a>
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Taniti Tourism Board</p>
    </footer>

    <script>
      async function fetchHeader() {
        fetch("components/header.html")
          .then((res) => res.text())
          .then((data) => {
            const headerContainer = document.getElementById("header-container");
            if (!headerContainer) {
              console.log("Missing Header Container");
            }
            document.getElementById("header-container").innerHTML = data;
          });
      }
      async function fetchHero() {
        fetch("components/hero.html")
          .then((res) => res.text())
          .then((heroHTML) => {
            const container = document.getElementById("hero-container");
            container.innerHTML = heroHTML;

            // Set content and background after insertion
            const hero = container.querySelector(".hero-banner");
            const title = container.querySelector("#hero-title");
            const text = container.querySelector("#hero-text");

            const { heroImage, heroTitle, heroText } = document.body.dataset;

            hero.style.backgroundImage = `url('${heroImage}')`;
            title.textContent = heroTitle;
            text.textContent = heroText;
          });
      }

      async function renderAllTeaserSections() {
        const sections = document.querySelectorAll("section.teasers[data-src]");

        for (const section of sections) {
          const jsonPath = section.dataset.src;

          try {
            const res = await fetch(jsonPath);
            if (!res.ok)
              throw new Error(`Failed to fetch ${jsonPath}: ${res.statusText}`);

            const events = await res.json();

            events.forEach((event, index) => {
              const wrapper = document.createElement("div");
              wrapper.className =
                index % 2 === 0 ? "teaser-left" : "teaser-right";

              const img = document.createElement("img");
              img.className = "teaser-image";
              img.src = event.image;
              img.alt = event.title;

              const content = document.createElement("div");

              const title = document.createElement("h3");
              title.textContent = event.title;

              const desc = document.createElement("p");
              desc.textContent = event.shortDescription;

              const link = document.createElement("a");
              link.href = "#";
              link.textContent = "Read More";
              link.onclick = (e) => {
                e.preventDefault();
                alert(event.longDescription);
              };

              content.appendChild(title);
              content.appendChild(desc);
              content.appendChild(link);

              wrapper.appendChild(img);
              wrapper.appendChild(content);

              section.appendChild(wrapper);
            });
          } catch (err) {
            console.error("Error rendering teaser section:", err);
          }
        }
      }

      // Call the function after DOM is ready
      document.addEventListener("DOMContentLoaded", () => {
        fetchHeader();
        fetchHero();
        renderAllTeaserSections();
      });

      // setInterval(showNextSlide, 4000); // Change image every 4 seconds
    </script>
  </body>
</html>
